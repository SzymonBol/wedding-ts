<div class="guest-confirmation-container">
  <h1 class="fancy-font header">
    PotwierdÅº zaproszenie
  </h1>
  <span class="welcome-text">
    Z radoÅ›ciÄ… chcielibyÅ›my Was zaprosiÄ‡ na nasze wesele!
    PoniÅ¼ej znajdziecie panel, w ktÃ³rym macie moÅ¼liwoÅ›Ä‡ potwierdziÄ‡ swoje przybycie.
    <ol>
      <li>
        Dla kaÅ¼dej osoby naleÅ¼y wybraÄ‡ odpowiednio: <b>bÄ™dÄ™ / nie bÄ™dÄ™</b> oraz <b>dietÄ™</b>. 
      </li>
      <li>
        Zaznacz czy <b>potrzebujecie noclegu</b> oraz jeÅ›li macie - <b>dodatkowe uwagi</b>.
      </li>
      <li>
        Zapisz formluarz przyciskiem <span (click)="scrollIntoButton()" class="save-reply">"Zapisz odpowiedÅº"</span>
      </li>
    </ol>       
  </span>
  @if(canEditBasedOnDate || isConfirmedSig() || isUserLoggedIn()){
  <div class="form-container" [formGroup]="form">
    <ng-container formArrayName="guests">
      @for(guest of guests.controls; track $index){
      <div class="guest-row" [formGroupName]="$index">
        <span class="header">{{guest.get('name')?.value}} {{guest.get('surname')?.value}}</span>
        <div class="guest-options">
          <span>
            <app-guest-confirmation-status [editMode]="editModeSig()"
              formControlName="isGoing"></app-guest-confirmation-status>
          </span>
          @if (!(isConfirmedSig() && guest.get('isGoing')?.value === false) || editModeSig()) {
          <span class="diet-option">
            <span class="diet-option-label">Opcja jedzeniowa: </span>
            <app-diet-switch formControlName="isVege" [editMode]="editModeSig()"></app-diet-switch>
          </span>
          }
        </div>
      </div>
      }
    </ng-container>
    <div class="invitation-comments">
      <label class="accomodation-header">
        <mat-icon>hotel</mat-icon>
        <span class="accomodation-text">Nocleg</span>
      </label>
      <mat-radio-group aria-label="Zakwaterowanie" formControlName="needAccommodation">
        <mat-radio-button [value]="false">We wÅ‚asnym zakresie</mat-radio-button>
        <mat-radio-button [value]="true">BÄ™dziemy potrzebowaÄ‡ noclegu</mat-radio-button>
      </mat-radio-group>
    </div>

    <div class="invitation-comments">
      <label for="comments-id">Dodatkowe uwagi: </label>
      <textarea id="comments-id" placeholder="Brak" formControlName="comment" maxlength="1024"></textarea>
    </div>
  </div>
  <div class="end-info">
    @if(editModeSig() && (canEditBasedOnDate || isUserLoggedIn())){
      <button mat-flat-button (click)="updateData()" class="save-button" id="save-button" 
      [@highlightElement]="buttonState()"> Zapisz odpowiedÅº </button>
    } @else {
      <h4>Twoja odpowiedÅº zostaÅ‚a zapisana! <br /> DziÄ™kujemy! â¤ï¸</h4>

      @if((canEditBasedOnDate || isUserLoggedIn())){
      <span>
        JakaÅ› pomyÅ‚ka? Nic nie szkodzi! Kliknij w <a href="" (click)="activeEditMode($event)"> tutaj </a> aby wprowadziÄ‡
        zmiany!
      </span>
      }
    }
  </div>
  } @else {
  <div class="invitation-expired">
    <div>
      <mat-icon class="warning-icon" [inline]="true">warning</mat-icon>
    </div>

    <div>
      <p style="font-weight: 600;"> Potwierdzanie zaproszeÅ„ zostaÅ‚o zakoÅ„czone!</p>
      <p>Nie otrzymaliÅ›my od Was odpowiedzi.</p>
      <p>JeÅ›li coÅ› poszÅ‚o nie tak, zaproszenie zostaÅ‚o juÅ¼ potwierdzone lub chcesz je teraz potwierdziÄ‡,
        prosimy o kontakt telefoniczny, abyÅ›my mogli wprowadziÄ‡ odpowiednie zmiany ğŸ˜Š.</p>
      <div class="contacts">
        <p class="contact">
          <mat-icon>phone</mat-icon>
          {{enviroment.miss}}:
          <a [href]="'tel:'+enviroment.missPhone">{{enviroment.missPhone}}</a>
        </p>
        <p class="contact">
          <mat-icon>phone</mat-icon>
          {{enviroment.mr}}:
          <a [href]="'tel:'+enviroment.mrPhone">{{enviroment.mrPhone}}</a>
        </p>
      </div>

    </div>
  </div>
  }

  <div class="flex">
    <span>ZachÄ™camy rÃ³wnieÅ¼ do zapoznania siÄ™ caÅ‚Ä… naszÄ… stronÄ…!</span>
    <button mat-button (click)="navigateToHomePage()">PrzejdÅº do storny gÅ‚Ã³wenj</button>
  </div>


</div>